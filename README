floodgate
=========

xdp traffic scrubber per ddos mitigation

arsyeja
-------
dropon paketa ne nivelin me te ulet te network stack
10 milion paketa per sekond performance
zero overhead ne cpu

statusi
-------
ne zhvillim aktiv
testuar vetem ne lab environment
mos perdor ne production pa testing

teknologjia
-----------
ebpf/xdp - kernel level packet filtering
hash tables - 10m ip tracking capability
btf - modern bpf with debug info
clang 12+ - per compilation me support per btf

instalimi
---------
apt-get install clang-12 llc-12 linux-tools-generic
git clone repo
cd floodgate
make

perdorimi bazik
---------------
aktivo ne interface
./floodgate -i vlan50

bloko udp flood ne dns
./floodgate -i vlan50 -p 53 -U

rate limit tcp syn flood
./floodgate -i vlan50 -t 100000

monitor real-time
./floodgate -i vlan50 -s 5

skenar real
-----------
fastnetmon detekton attack
bgp route drejt scrubber
cisco forward traffic ne vlan50
floodgate proceson dhe pastron
return clean traffic

verifiko
--------
check xdp attachment
bpftool net show

shiko maps
bpftool map dump name harta_ip

monitor stats
watch -n1 'bpftool map dump name harta_statistika'

arkitektura
-----------
harta_ip          hash map 10m entries per ip tracking
harta_config      array map per runtime config
harta_statistika  percpu array per zero-lock stats

variablat ne shqip
------------------
ip_burimi         source ip address
porta_dest        destination port number
protokoll         tcp/udp/icmp protocol type
numrues_paketa    packet counter per ip
koha_fundit       last seen timestamp nanosec
limit_tcp         tcp packets per second limit
limit_udp         udp packets per second limit
bloko_tcp         block all tcp boolean
bloko_udp         block all udp boolean

kernel requirements
-------------------
min 5.4 per btf support
tested on 5.4.0-150-generic

integrimi me fastnetmon coming soon
automatic bgp trigger response
dynamic rule injection via api
